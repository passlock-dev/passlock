import{a as P,t as I,c as ke,d as ae}from"../chunks/disclose-version.BEb29zvH.js";import{d as it,g as ot,h as R,l as fe,Y as lt,T as ct,ap as Ge,_ as dt,a0 as Ae,k as ue,m as G,av as ne,V as Xe,W as Ze,X as ft,ah as ut,Q as Ee,aw as ge,ax as Me,ay as be,az as vt,ao as mt,aA as pt,at as ht,aB as $e,o as _t,al as yt,ag as gt,aC as bt,I as xt,N as Le,aD as wt,j as kt,aE as At,w as Et,aF as Mt,A as Lt,b as Tt,p as St,aG as Pt,z as l,q as zt,s as W,f as X,t as J,a as Nt,aH as Ct,$ as Ht,c as O,J as _e,B as N,r as C}from"../chunks/runtime.Cr8GyxOp.js";import{d as jt,e as Wt,s as Z}from"../chunks/render.BK5RulHW.js";import{p as Ut,a as ye,i as K}from"../chunks/props.DZvJ21qY.js";import{h as It}from"../chunks/svelte-head.DtR8Dm96.js";import{r as Dt,a as Te,s as Se}from"../chunks/attributes.BeNbGnLQ.js";import{s as Ot,a as Rt}from"../chunks/store.BHKJAjsl.js";import{p as Ft,i as qt,a as Bt}from"../chunks/entry.-mXGl6Ft.js";import{r as Jt}from"../chunks/index.DixRZ5Av.js";function Pe(a,e){return e}function Qt(a,e,s,n){for(var o=[],v=e.length,c=0;c<v;c++)vt(e[c].e,o,!0);var p=v>0&&o.length===0&&s!==null;if(p){var y=s.parentNode;mt(y),y.append(s),n.clear(),q(a,e[0].prev,e[v-1].next)}pt(o,()=>{for(var x=0;x<v;x++){var g=e[x];p||(n.delete(g.k),q(a,g.prev,g.next)),ht(g.e,!p)}})}function re(a,e,s,n,o,v=null){var c=a,p={flags:e,items:new Map,first:null},y=(e&$e)!==0;if(y){var x=a;c=R?fe(_t(x)):x.appendChild(it())}R&&lt();var g=null,S=!1;ot(()=>{var d=s(),h=ct(d)?d:d==null?[]:Ge(d),f=h.length;if(S&&f===0)return;S=f===0;let k=!1;if(R){var A=c.data===dt;A!==(f===0)&&(c=Ae(),fe(c),ue(!1),k=!0)}if(R){for(var w=null,L,r=0;r<f;r++){if(G.nodeType===8&&G.data===yt){c=G,k=!0,ue(!1);break}var t=h[r],i=n(t,r);L=et(G,p,w,null,t,i,r,o,e),p.items.set(i,L),w=L}f>0&&fe(Ae())}if(!R){var _=gt;Kt(h,p,c,o,e,(_.f&ne)!==0,n)}v!==null&&(f===0?g?Xe(g):g=Ze(()=>v(c)):g!==null&&ft(g,()=>{g=null})),k&&ue(!0),s()}),R&&(c=G)}function Kt(a,e,s,n,o,v,c){var H,B,Q,j;var p=(o&bt)!==0,y=(o&(ge|be))!==0,x=a.length,g=e.items,S=e.first,d=S,h,f=null,k,A=[],w=[],L,r,t,i;if(p)for(i=0;i<x;i+=1)L=a[i],r=c(L,i),t=g.get(r),t!==void 0&&((H=t.a)==null||H.measure(),(k??(k=new Set)).add(t));for(i=0;i<x;i+=1){if(L=a[i],r=c(L,i),t=g.get(r),t===void 0){var _=d?d.e.nodes_start:s;f=et(_,e,f,f===null?e.first:f.next,L,r,i,n,o),g.set(r,f),A=[],w=[],d=f.next;continue}if(y&&Vt(t,L,i,o),t.e.f&ne&&(Xe(t.e),p&&((B=t.a)==null||B.unfix(),(k??(k=new Set)).delete(t))),t!==d){if(h!==void 0&&h.has(t)){if(A.length<w.length){var u=w[0],m;f=u.prev;var b=A[0],M=A[A.length-1];for(m=0;m<A.length;m+=1)ze(A[m],u,s);for(m=0;m<w.length;m+=1)h.delete(w[m]);q(e,b.prev,M.next),q(e,f,b),q(e,M,u),d=u,f=M,i-=1,A=[],w=[]}else h.delete(t),ze(t,d,s),q(e,t.prev,t.next),q(e,t,f===null?e.first:f.next),q(e,f,t),f=t;continue}for(A=[],w=[];d!==null&&d.k!==r;)(v||!(d.e.f&ne))&&(h??(h=new Set)).add(d),w.push(d),d=d.next;if(d===null)continue;t=d}A.push(t),f=t,d=t.next}if(d!==null||h!==void 0){for(var z=h===void 0?[]:Ge(h);d!==null;)(v||!(d.e.f&ne))&&z.push(d),d=d.next;var E=z.length;if(E>0){var T=o&$e&&x===0?s:null;if(p){for(i=0;i<E;i+=1)(Q=z[i].a)==null||Q.measure();for(i=0;i<E;i+=1)(j=z[i].a)==null||j.fix()}Qt(e,z,T,g)}}p&&ut(()=>{var Y;if(k!==void 0)for(t of k)(Y=t.a)==null||Y.apply()}),Ee.first=e.first&&e.first.e,Ee.last=f&&f.e}function Vt(a,e,s,n){n&ge&&Me(a.v,e),n&be?Me(a.i,s):a.i=s}function et(a,e,s,n,o,v,c,p,y){var x=(y&ge)!==0,g=(y&wt)===0,S=x?g?xt(o):Le(o):o,d=y&be?Le(c):c,h={i:d,v:S,k:v,a:null,e:null,prev:s,next:n};try{return h.e=Ze(()=>p(a,S,d),R),h.e.prev=s&&s.e,h.e.next=n&&n.e,s===null?e.first=h:(s.next=h,s.e.next=h.e),n!==null&&(n.prev=h,n.e.prev=h.e),h}finally{}}function ze(a,e,s){for(var n=a.next?a.next.e.nodes_start:s,o=e?e.e.nodes_start:s,v=a.e.nodes_start;v!==n;){var c=kt(v);o.before(v),v=c}}function q(a,e,s){e===null?a.first=s:(e.next=s,e.e.next=s&&s.e),s!==null&&(s.prev=e,s.e.prev=e&&e.e)}function Ne(a,e,s){At(()=>{var n=Et(()=>e(a,s==null?void 0:s())||{});if(s&&(n!=null&&n.update)){var o=!1,v={};Mt(()=>{var c=s();Lt(c),o&&Tt(v,c)&&(v=c,n.update(c))}),o=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}function Yt(a,e){var s=a.__className,n=Gt(e);R&&a.className===n?a.__className=n:(s!==n||R&&a.className!==n)&&(e==null?a.removeAttribute("class"):a.className=n,a.__className=n)}function Gt(a){return a??""}function F(a,e,s){if(s){if(a.classList.contains(e))return;a.classList.add(e)}else{if(!a.classList.contains(e))return;a.classList.remove(e)}}function Xt(a){const e=JSON.parse(a);return e.data&&(e.data=Ft(e.data)),e}function ve(a){return HTMLElement.prototype.cloneNode.call(a)}function Zt(a,e=()=>{}){const s=async({action:o,result:v,reset:c=!0,invalidateAll:p=!0})=>{v.type==="success"&&(c&&HTMLFormElement.prototype.reset.call(a),p&&await qt()),(location.origin+location.pathname===o.origin+o.pathname||v.type==="redirect"||v.type==="error")&&Bt(v)};async function n(o){var k,A,w,L,r;if(((k=o.submitter)!=null&&k.hasAttribute("formmethod")?o.submitter.formMethod:ve(a).method)!=="post")return;o.preventDefault();const c=new URL((A=o.submitter)!=null&&A.hasAttribute("formaction")?o.submitter.formAction:ve(a).action),p=(w=o.submitter)!=null&&w.hasAttribute("formenctype")?o.submitter.formEnctype:ve(a).enctype,y=new FormData(a),x=(L=o.submitter)==null?void 0:L.getAttribute("name");x&&y.append(x,((r=o.submitter)==null?void 0:r.getAttribute("value"))??"");const g=new AbortController;let S=!1;const h=await e({action:c,cancel:()=>S=!0,controller:g,formData:y,formElement:a,submitter:o.submitter})??s;if(S)return;let f;try{const t=new Headers({accept:"application/json","x-sveltekit-action":"true"});p!=="multipart/form-data"&&t.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(p)?p:"application/x-www-form-urlencoded");const i=p==="multipart/form-data"?y:new URLSearchParams(y),_=await fetch(c,{method:"POST",headers:t,cache:"no-store",body:i,signal:g.signal});f=Xt(await _.text()),f.type==="error"&&(f.status=_.status)}catch(t){if((t==null?void 0:t.name)==="AbortError")return;f={type:"error",error:t}}h({action:c,formData:y,formElement:a,update:t=>s({action:c,result:f,reset:t==null?void 0:t.reset,invalidateAll:t==null?void 0:t.invalidateAll}),result:f})}return HTMLFormElement.prototype.addEventListener.call(a,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(a,"submit",n)}}}var Ce="mz3PUW_p",He=["#FFC700","#FF0000","#2E3191","#41BBC7"],je=3500,We=.5,Ue=150,Ie="mix",De=12,Oe="",Re=!0,Fe=800,qe=1600;function $t(a,e={}){let{colors:s=He,duration:n=je,force:o=We,particleCount:v=Ue,particleShape:c=Ie,particleSize:p=De,particleClass:y=Oe,destroyAfterDone:x=Re,stageHeight:g=Fe,stageWidth:S=qe}=e;(function(r){if(document.querySelector("style[data-neoconfetti]"))return;const t=me("style");t.dataset.neoconfetti="",t.textContent=r,pe(document.head,t)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),a.classList.add("mz3PUW_c"),a.style.setProperty("--sh",g+"px");let d=[],h=[];const f=()=>$(U()*(sa-1)),k=(r,t)=>c!=="rectangles"&&(r==="circles"||na(t));function A(r,t){const i=f(),_=k(c,i),u=(M,z)=>r.style.setProperty(M,z+"");u("--xlp",he(se(Ke(t,90)-180),0,180,-S/2,S/2)+"px"),u("--dc",n-$(1e3*U())+"ms");const m=U()<ta?V(U()*aa,2):0;u("--x1",m),u("--x2",-1*m),u("--x3",m),u("--x4",V(se(he(se(Ke(t,90)-180),0,180,-1,1)),4)),u("--y1",V(U()*Je,4)),u("--y2",V(U()*o*(tt()?1:-1),4)),u("--y3",Je),u("--y4",V(ra(he(se(t-180),0,180,o,-o),0),4)),u("--w",(_?p:$(4*U())+p/2)+"px"),u("--h",(_?p:$(2*U())+p)+"px");const b=i.toString(2).padStart(3,"0").split("");u("--hr",b.map(M=>+M/2+"").join(" ")),u("--r",b.join(" ")),u("--rd",V(U()*(ea-Be)+Be)+"ms"),u("--br",_?"50%":0)}let w;function L(){a.innerHTML="",clearTimeout(w),d=Qe(v,s),h=function(r,t=[],i){const _=[];for(const{color:u}of t){const m=me("div");m.className=`${Ce} ${i}`,m.style.setProperty("--bgc",u);const b=me("div");pe(m,b),pe(r,m),_.push(m)}return _}(a,d,y);for(const[r,t]of Ve(h))A(t,d[+r].degree);w=setTimeout(()=>{x&&(a.innerHTML="")},n)}return L(),{update(r){const t=r.particleCount??Ue,i=r.particleShape??Ie,_=r.particleSize??De,u=r.particleClass??Oe,m=r.colors??He,b=r.stageHeight??Fe,M=r.duration??je,z=r.force??We,E=r.stageWidth??qe,T=r.destroyAfterDone??Re;d=Qe(t,m);let H=!1;if(t===v){h=Array.from(a.querySelectorAll(`.${Ce}`));for(const[B,{color:Q}]of Ve(d)){const j=h[+B];JSON.stringify(s)!==JSON.stringify(m)&&j.style.setProperty("--bgc",Q),i!==c&&j.style.setProperty("--br",k(i,f())?"50%":"0"),u!==y&&(y&&j.classList.remove(y),u&&j.classList.add(u))}}else H=!0;x&&!T&&clearTimeout(w),a.style.setProperty("--sh",b+"px"),n=M,s=m,o=z,v=t,c=i,p=_,y=u,x=T,g=b,S=E,H&&L()},destroy(){a.innerHTML="",clearTimeout(w)}}}var Be=200,ea=800,ta=.1,aa=.3,Je=.5,se=Math.abs,U=Math.random,$=Math.round,ra=Math.max,me=a=>document.createElement(a),pe=(a,e)=>a.appendChild(e),Qe=(a,e)=>Array.from({length:a},(s,n)=>({color:e[n%e.length],degree:360*n/a})),V=(a,e=2)=>$((a+Number.EPSILON)*10**e)/10**e,he=(a,e,s,n,o)=>(a-e)*(o-n)/(s-e)+n,Ke=(a,e)=>a+e>360?a+e-360:a+e,tt=()=>U()>.5,Ve=Object.entries,sa=6,na=a=>a!==1&&tt();const at="(prefers-reduced-motion: reduce)",ia=()=>window.matchMedia(at).matches,oa=Jt(ia(),a=>{{const e=n=>{a(n.matches)},s=window.matchMedia(at);return s.addEventListener("change",e),()=>{s.removeEventListener("change",e)}}});function Ye(a,e,s){var o;a.preventDefault();const n=a.target.getAttribute("data-key");n==="backspace"?(_e(e,ye(l(e).slice(0,-1))),(o=s())!=null&&o.badGuess&&s(s().badGuess=!1,!0)):l(e).length<5&&_e(e,l(e)+n)}var la=I('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),ca=I('<div class="letter svelte-1pg2j5l"> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),da=I('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div class="row svelte-1pg2j5l"></div>',1),fa=I('<p class="svelte-1pg2j5l"> </p>'),ua=I('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),va=I('<button formaction="?/update" name="key"> </button>'),ma=I('<div class="row svelte-1pg2j5l"></div>'),pa=I('<div class="keyboard svelte-1pg2j5l"><button data-key="enter" class="svelte-1pg2j5l">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),ha=I('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),_a=I('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div class="grid svelte-1pg2j5l"></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function La(a,e){St(e,!0);const s=Ot(),n=()=>Rt(oa,"$reducedMotion",s);let o=Ut(e,"form",15),v=N(()=>e.data.answers.at(-1)==="xxxxx"),c=N(()=>l(v)?-1:e.data.answers.length),p=Pt(ye(e.data.guesses[l(c)]||""));zt(()=>{_e(p,ye(e.data.guesses[l(c)]||""))});let y=N(()=>l(p).length===5);const x=N(()=>{let r={},t={};return e.data.answers.forEach((i,_)=>{const u=e.data.guesses[_];for(let m=0;m<5;m+=1){const b=u[m];i[m]==="x"?(r[b]="exact",t[b]="correct"):r[b]||(r[b]=i[m]==="c"?"close":"missing",t[b]=i[m]==="c"?"present":"absent")}}),{classnames:r,description:t}}),g=N(()=>l(x).classnames),S=N(()=>l(x).description);function d(r){var t;r.metaKey||r.key==="Enter"&&!l(y)||(t=document.querySelector(`[data-key="${r.key}" i]`))==null||t.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}var h=_a();Wt("keydown",Ct,d),It(r=>{var t=la();Ht.title="Sverdle",P(r,t)});var f=W(X(h),2),k=W(O(f),2);re(k,20,()=>Array.from(Array(6).keys()),r=>r,(r,t)=>{var i=da();const _=N(()=>t===l(c));var u=X(i),m=O(u);C(u);var b=W(u,2);re(b,20,()=>Array.from(Array(5).keys()),M=>M,(M,z)=>{var E=ca();const T=N(()=>l(_)?l(p):e.data.guesses[t]),H=N(()=>{var D;return(D=e.data.answers[t])==null?void 0:D[z]}),B=N(()=>{var D;return((D=l(T))==null?void 0:D[z])??""}),Q=N(()=>l(_)&&z===l(T).length),j=N(()=>l(H)==="x"),Y=N(()=>l(H)==="c"),xe=N(()=>l(H)==="_");var we=O(E),ie=W(we),rt=O(ie);K(rt,()=>l(j),D=>{var ee=ae("(correct)");P(D,ee)},D=>{var ee=ke(),st=X(ee);K(st,()=>l(Y),le=>{var te=ae("(present)");P(le,te)},le=>{var te=ke(),nt=X(te);K(nt,()=>l(xe),ce=>{var de=ae("(absent)");P(ce,de)},ce=>{var de=ae("empty");P(ce,de)},!0),P(le,te)},!0),P(D,ee)}),C(ie);var oe=W(ie,2);Dt(oe),C(E),J(()=>{F(E,"exact",l(j)),F(E,"close",l(Y)),F(E,"missing",l(xe)),F(E,"selected",l(Q)),Z(we,`${l(B)??""} `),oe.disabled=!l(_),Te(oe,l(B))}),P(M,E)}),C(b),J(()=>{Z(m,`Row ${t+1}`),F(b,"current",l(_))}),P(r,i)}),C(k);var A=W(k,2),w=O(A);K(w,()=>l(v)||e.data.answers.length>=6,r=>{var t=ua(),i=X(t);K(i,()=>!l(v)&&e.data.answer,m=>{var b=fa(),M=O(b);C(b),J(()=>Z(M,`the answer was "${e.data.answer??""}"`)),P(m,b)});var _=W(i,2),u=O(_);C(_),J(()=>Z(u,`${(l(v)?"you won :)":"game over :(")??""} play again?`)),P(r,t)},r=>{var t=pa(),i=O(t),_=W(i,2);_.__click=[Ye,p,o];var u=W(_,2);re(u,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],Pe,(m,b)=>{var M=ma();re(M,21,()=>b,Pe,(z,E)=>{var T=va();T.__click=[Ye,p,o];var H=O(T,!0);C(T),J(()=>{Se(T,"data-key",l(E)),Yt(T,`${l(g)[l(E)]??""} svelte-1pg2j5l`),T.disabled=l(y),Te(T,l(E)),Se(T,"aria-label",`${l(E)??""} ${(l(S)[l(E)]||"")??""}`),Z(H,l(E))}),P(z,T)}),C(M),P(m,M)}),C(t),J(()=>{i.disabled=!l(y),F(i,"selected",l(y))}),P(r,t)}),C(A),C(f),Ne(f,(r,t)=>Zt(r,t),()=>()=>({update:r})=>{r({reset:!1})});var L=W(f,2);K(L,()=>l(v),r=>{var t=ha();Ne(t,(i,_)=>$t(i,_),()=>({particleCount:n()?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),P(r,t)}),J(()=>{var r;F(k,"playing",!l(v)),F(k,"bad-guess",(r=o())==null?void 0:r.badGuess)}),P(a,h),Nt()}jt(["click"]);export{La as component};
